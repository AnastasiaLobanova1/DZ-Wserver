## Управление службами и приложениями
### 1. Описать различные типы служб в Windows Server 2012 и их функции.
- Функция IIS CPU Throttling — позволяет ограничить допустимый уровень выделения ресурсов процессора каждому сайту или пулу приложений, работающих на IIS, а так же измерять использованные ресурсы. Новый функционал станет полезен в многопользовательской среде, такой как разделяемый хостинг.

- Функция масштабирования с поддержкой архитектуры NUMA в IIS сервере использует преимущества нового оборудования: нагрузка разделяется на несколько процессов и распределяется между узлами NUMA (Non-Uniform Memory Access), чтобы минимизировать потребность процессора в синхронизации памяти с другими серверами. В результате процессы выполняются быстрее и эффективнее.

- Распределенное кэширование в Windows Server 2012 распределяет работу между несколькими серверами, предлагая логически единый кэш, который может масштабироваться как по размеру, так и количеству обслуживаемых транзакций.

- Технология Server Name Indication (SNI) помогает увеличить плотность защищенных веб-сайтов, обеспечивая более высокую масштабируемость. Она позволяет нескольким защищенным сайтам использовать единый IP-адрес и порт, различая их по имени хоста, а так же использовать локальное хранилище сертификатов Web Hosting, которое может содержать тысячи SSL-сертификатов.

- Инициализация приложений — новая функция в Internet Information Services (IIS) 8.0, позволяющая администраторам web-сайтов настроить IIS 8.0 таким образом, чтобы система проактивно выполняла инициализацию одного или нескольких веб-приложений. А пока приложение инициализируется, IIS 8.0 может предоставлять статический контент до завершения инициации. Новый функционал снижает время реакции на первый запрос, а так же демонстрирует заданную заставку, чтобы пользователь не ожидал результата перед пустым экраном.

- Протокол WebSocket — новый стандартный протокол, предоставляющий безопасные двунаправленные подключения в режиме реального времени между клиентами (браузер или клиентское приложение) и сервером, обеспечивая улучшенную поддержку интерактивных HTML и AJAX приложений с интенсивным обменом данными. Этот протокол поддерживается в IIS ASP.NET 4.5 и Windows Communication Foundation (WCF) при использовании нативных или управляемых программных API для написания серверной части приложений. Так же эта функция дает возможность пересылки сообщений от сервера к клиенту и использования других протоколов поверх WebSocket. Эта функция открывает действительно новый путь написания web-приложений.

- Поддержка ASP.NET 3.5 и ASP.NET 4.5. IIS 8.0 на Windows Server 2012 позволяет различным приложениям ASP.NET использовать разные версии .NET Framework - 3.5 и 4.5 - без дополнительных ухищрений, размещая разные версии .NET Framework в разных пулах приложений.

- Управление приложениями ASP.NET 4.5 и 3.5. IIS 8.0 поддерживает приложения и ASP.NET 3.5, и 4.5. Аналогично и инфраструктура управления также поддерживает управление приложениями и ASP.NET 3.5 и 4.5. Таким образом, администраторы серверов и разработчики могут полноценно управлять приложениями разных версий, повышая тем самым эффективность администрирования.

- Централизованная поддержка SSL-сертификатов в Windows Server 2012 помогает значительно снизить стоимость использования в случае управления большим количеством SSL сайтов, например, хостинг-провайдерам или крупным корпорациям. SSL сертификаты хранятся централизованно на файл-сервере Windows Server 2012 и доступны для всей фермы серверов, упрощая общее управление. При этом сервис разработан таким образом, что может легко поддерживать тысячи SSL-сертификатов.

- Ограничение числа попыток авторизации на FTP. IIS 8.0 включает в себя службу FTP Network Security, которая защищает сервера от грубых вторжений со стороны недружественных пользователей. Эта служба предоставляет тот же уровень безопасности, как и служба аутентификации, но без необходимости создания и управления индивидуальными аккаунтами.

- Динамическое запрещение IP-адресов защищает сервер от DDoS атак. Входящий в IIS новый функционал позволяет легко настраивать фильтры так, чтобы можно было выборочно запрещать доступ IP-адресам потенциально враждебных пользователей, которые могут представлять угрозу Вашим серверам. Основными критериями являются: число попыток подключения, число попыток за период времени или сокрытие IP-адреса с помощью прокси-сервера.
### 2. Объяснить процесс установки, настройки и управления службами и приложениями.
На хороших хостингах установить Windows Server можно в автоматическом режиме при создании нового VDS. Посмотрим, как это работает, на примере Timeweb.
- Открываем панель управления VDS.
- Переходим в раздел «Список VDS».
- Нажимаем на кнопку «Создать сервер».
- Указываем любое имя и комментарий (опционально).
- Выбираем в списке операционных систем Windows Server 2012 R2.

Настраиваем конфигурацию сервера: количество ядер процессора, объем оперативной памяти (минимум 512 МБ) и размер хранилища (минимум 32 ГБ).

Включаем защиту от DDoS, если она требуется.

Нажимаем на кнопку «Создать сервер».
Лицензия уже входит в итоговую стоимость сервера. При создании VDS система будет установлена и активирована. Хостер отправит на почту данные для авторизации на сервере, чтобы вы могли его настроить.

Если на хостинге нет автоматической установки Windows Server, то придется инсталлировать систему вручную. Для этого нужно купить лицензию и скачать ISO-образ WS 2012 R2. 

Для установки системы из ISO-образа обычно используется панель VMmanager. Порядок ручной инсталляции такой:
- Запускаем VMmanager.
- Открываем раздел «Виртуальные машины» в меню слева.

Останавливаем VDS, на который будем устанавливать WS 2012 R2.

- Кликаем на кнопку «Диски» на верхней панели.
- Выбираем пункт «ISO» на верхней панели.
- В строке «Имя образа» выбираем дистрибутив Windows Server, указываем шину «IDE» и порядок загрузки «В начало».
- Возвращаемся в раздел «Диски виртуальной машины» и ставим шину IDE для виртуального диска.

Жмем на кнопку «Интерфейсы» на верхней панели.

Выбираем интерфейс и нажимаем на кнопку «Изменить».

Далее – интерфейс «rtl8139». Это нужно для автоматической установки сетевого адаптера.

Возвращаемся в раздел «Виртуальные машины» и запускаем VDS, которую мы остановили на втором шаге.

Переходим в консоль VNC — на верхней панели есть соответствующая кнопка.

В VNC-консоли запустится установка Windows Server 2012 R2. Если вы ставили любую другую версию ОС от Майкрософт, то без проблем здесь разберетесь. 

Нажимаем на кнопку «Установить».

Вводим лицензионный ключ для активации системы.

Выбираем установку с графическим интерфейсом — так будет проще разобраться с настройками.

Принимаем лицензионное соглашение.

Запускаем выборочную установку.

Выбираем диск и при необходимости делим его на части.

Ждем, пока скопируются файлы.

Придумываем пароль администратора.

Ожидаем завершения установки.

Ручная установка занимает заметно больше времени и требует опыта в администрировании. Автоматическая же инсталляция намного быстрее и проще.

**Настройка** Windows Server 2012 R2

Сразу после установки рекомендуется установить обновления. 

Открываем «Панель управления».

Переходим в раздел «Система и безопасность».

Открываем «Центр обновления».

Запускаем поиск и установку апдейтов.

Система установлена, обновления есть — теперь приступаем к настройке базовых параметров. 

Первый шаг — изменение имени, чтобы было удобно настраивать подключения.

Открываем раздел «Панель управления» — «Система и безопасность» — «Система».

Нажимаем на ссылку «Изменить параметры».

В появившемся окне на вкладке «Имя компьютера» нажимаем на кнопку «Изменить».

В строке «Имя компьютера» указываем имя сервера, которое будет удобно использовать для настройки подключений. Например, WServer.

Перезагружаем машину для применения параметров.

Следующий шаг — проверка IP-адреса, по которому будет доступен сервер.

Открываем поисковую строку и вводим запрос «ncpa.cpl» и нажимаем на Enter.

Находим основной сетевой адаптер, кликаем по нему правой кнопкой и открываем «Свойства».

Выделяем «Протокол интернета версии 4» и нажимаем на кнопку «Свойства».

Прописываем IP-адрес, маску сети, шлюз по умолчанию, адреса DNS-серверов.

Теперь нужно добавить роли и компоненты.

Запускаем «Диспетчер серверов».

В «Панели мониторинга» нажимаем «Добавить роли и компоненты».

Выбираем тип установки «Установка ролей или компонентов».

На вкладке «Выбор сервера» выделяем свой VDS.
Выбираем из списка стандартные роли, которые подходят для решения большинства задач. Если вам нужны другие роли, отметьте их тоже.

DHCP-сервер

DNS-сервер

Веб-сервер (IIS)

Доменные службы Active Directory

Сервер приложений

Службы политики сети и доступа

Службы активации корпоративных лицензий

Службы удаленных рабочих столов

Удаленный доступ

Файловые службы и хранилища

На вкладке «Компоненты» оставляем стандартные отметки. Единственное возможное изменение — включение службы беспроводной локальной сети.

На вкладке «Службы ролей» отмечаем роли, необходимые для работы с удаленными рабочими столами.

Лицензирование удаленных рабочих столов

Узел виртуализации удаленных рабочих столов

Узел сеансов удаленных рабочих столов

Шлюз удаленных рабочих столов

В службах ролей удаленного доступа можно также отметить работу с VPN и прокси, если есть такая необходимость.

Доходим до вкладки «Подтверждение». Отмечаем опцию «Автоматический перезапуск конечного сервера, если требуется». Нажимаем на кнопку «Установить» и ждем завершения инсталляции.

После установки нужно все настроить. Начнем с DNS.

Настройка DNS
Открываем «Диспетчер серверов».

Жмемна флажок на верхней панели.

Кликаем на опцию «Повысить роль этого сервера до контроллера домена».
В конфигурации развертывания выбираем режим «Добавить новый лес» и придумываем корневой домен. Название может быть любым — например, domain.com.

На вкладке «Параметры контроллера» указываем новый пароль и нажимаем «Далее». Затем доходим до вкладки «Проверка предварительных требований». Если параметры установлены верно, то в окне будет сообщение о том, что все проверки готовности к установке выставлены успешно. Нажимаем на кнопку «Установить».

После завершения инсталляции перезагружаем сервер и авторизируемся под именем администратора. 

После перезагрузки продолжаем настройку DNS.

Открываем «Диспетчер серверов».

Переходим в меню «Средства» на верхней панели и выбираем пункт «DNS».

В диспетчере DNS разворачиваем ветку DNS — Server — «Зоны обратного просмотра». Кликаем правой кнопкой мыши и выбираем пункт «Создать новую зону».

Выбираем тип зоны «Основная» и отмечаем пункт «Сохранять зону в Active Directory».

Выбираем режим «Для всех DNS-серверов, работающих на контроллерах домена в этом домене».

Отмечаем зону обратного просмотра IPv4.

В строке «Идентификатор сети» выбираем диапазон IP-адресов или имя зоны.

На следующем шаге разрешаем безопасные динамические обновления.

Жмем «Готово» для применения конфигурации.

Настройка DHCP
Следующий шаг — настройка DHCP. Это нужно для того, чтобы сервер мог раздавать диапазон IP.

Открываем «Диспетчер серверов».

Нажимаем на флажок и выбираем пункт «Завершение настройки DHCP».

В разделе «Авторизация» отмечаем пункт «Использовать учетные данные следующего пользователя» и нажимаем на кнопку «Фиксировать».

В разделе «Сводка» нажимаем «Закрыть».

Открываем меню «Средства» на верхней панели и выбираем пункт «DHCP».

Разворачиваем ветку DHCP — «Имя домена» — IPv4. Кликаем по IPv4 правой кнопкой и выбираем пункт «Создать область».

Задаем любое название области.

Прописываем диапазон IP-адресов, которые будет раздавать сервер. Он задается по желанию пользователя.

В следующем окне исключаем определенный диапазон адресов. Этот шаг можно пропустить.

Задаем срок действия IP-адреса для устройства. По истечении указанного периода адрес изменится. 

Отмечаем пункт «Да, настроить эти параметры сейчас».

Добавляем IP-адрес маршрутизатора или пропускаем этот шаг.

Указываем имя домена в качестве родительского домена.

Подтверждаем, что хотим активировать область сейчас.

Нажимаем «Готово» для сохранения конфигурации.

Настройка сервера для подключения по RDP
Чтобы к VDS можно было подключаться по RDP, должны быть установлены следующие роли и компоненты:

Службы удаленных рабочих столов.

Лицензирование удаленных рабочих столов

Узел сеансов удаленных рабочих столов

Шлюз удаленных рабочих столов

Все эти роли и компоненты мы установили в предыдущем разделе. Теперь нужно настроить групповую политику.

Открываем «Поиск» на панели инструментов.

Находим и открываем редактор групповых политик — gpedit.msc.

Переходим на ветку «Конфигурация компьютера» — «Административные шаблоны» — «Компоненты Windows» — «Службы удаленных рабочих столов» — «Узел сеансов удаленных рабочих столов» — «Лицензирование».

Разворачиваем пункт «Использовать указанные серверы лицензирования удаленных рабочих столов».

В строке «Использовать серверы лицензий» указываем имя или адрес своего сервера.

Возвращаемся обратно в раздел «Лицензирование» и открываем пункт «Задать режим лицензирования».

Выбираем режим лицензирования — на пользователя или на устройство в зависимости от того, какой тип лицензии имеется.

После настройки групповых политик переходим к самому лицензированию.

Открываем «Панель управления».

Переходим в раздел «Администрирование» — Remote Desktop Services — «Диспетчер лицензирования». 

Кликаем по серверу правой кнопкой и нажимаем «Активировать».

Выбираем метод подключения «Авто».

Вводим имя, фамилию, организацию, страну расположения сервера. Можно указать любые данные, они не проверяются.

Запускаем мастер установки лицензий.

Выбираем программу лицензирования, по которой была приобретена лицензия.

Вводим ключ активации, который получили после покупки лицензии.

Указываем количество пользователей/устройств, если оно не определилось автоматически.

Нажимаем «Готово», чтобы завершить работу мастера установки лицензий.

Затем нужно вернуться в раздел «Администрирование» — Remote Desktop Services — «Диспетчер лицензирования» и посмотреть, активирован ли сервер. Если да, значит, настройка успешно завершена. 

На иконке сервера может быть желтый значок предупреждения. Чтобы устранить проблемы, нажимаем на ссылку «Рецензия». В меню будут пункты, которые необходимо отметить.

Добавление пользователей для подключения через RDP
После успешного лицензирования добавляем первого пользователя для подключения через RDP.

Открываем «Диспетчер серверов».

Раскрываем меню «Средства», выбираем пункт «Пользователи и компьютеры Active Directory».

Разворачиваем раздел «Пользователи и компьютеры».

Кликаем правой кнопкой по своему домену и выбираем пункт «Создать» — «Подразделение».

Задаем имя подразделения — например, «Пользователи».

Кликаем правой кнопкой по созданному подразделению и выбираем пункт «Создать» — «Пользователь».

В карточке пользователя задаем параметры: имя, фамилию, имя на латинице для авторизации.

Указываем пароль и настраиваем его параметры — например, можно запретить смену пароля пользователем и сделать срок действия неограниченным.

Нажимаем «Готово» для сохранения конфигурации.

Аналогичным образом добавляются другие пользователи, которые могут удаленно подключаться к серверу с Windows Server 2012. 

Базовая настройка Windows Server 2012 R2 завершена.
### 3. Описать методы устранения неполадок в службах и приложениях.
Контрольный список для устранения неполадок

Шаг 1. Определение проблемы путем изучения журнала событий на наличие определенных ошибок

Откройте Просмотр событий из панель управления>Административные средства.

Найдите события агента клиентский компонент Центра обновления Windows в системном журнале и ошибки в журналах системы и приложений примерно в то же время, когда были применены обновления.

Разверните дерево Просмотр событий в журналы >приложений и службMicrosoft>WindowsUpdateClient>> Operational.

Определите обновление, которое не удалось установить, и код сбоя.

Найдите ошибку и ее разрешение в разделе Общие ошибки клиентский компонент Центра обновления Windows или клиентский компонент Центра обновления Windows коды ошибок по компонентам.

Шаг 2. Проверка состояния ожидания перезагрузки

Если компьютер не был перезагружен, перезагрузите компьютер.

Шаг 3. Обновление стека служб
Установите последнее обновление стека обслуживания. См. раздел Последние Обновления стека обслуживания.

Шаг 4. Запуск средства устранения неполадок клиентский компонент Центра обновления Windows для Windows

Скачайте средство устранения неполадок и выберите Открыть или Сохранить во всплывающем окне. (Если вы наберете кнопку Сохранить, вам потребуется открыть средство устранения неполадок в расположении сохранения.)

Нажмите кнопку Далее , чтобы запустить средство устранения неполадок, и выполните действия по выявлению и устранению проблем.

После завершения работы средства устранения неполадок попробуйте запустить клиентский компонент Центра обновления Windows еще раз. На кнопке Пуск выберите Параметры>Обновление & безопасности>клиентский компонент Центра обновления Windows>Проверить наличие обновлений и установить все доступные обновления.

Если применимо, сбросьте компоненты обновления Windows.

Шаг 5. Используйте DISM или средство проверки готовности к обновлению системы для устранения клиентский компонент Центра обновления Windows проблемы

Дополнительные сведения см. в статье Устранение ошибок клиентский компонент Центра обновления Windows с помощью средства проверки готовности к обновлению системы или DISM.

Распространенные проблемы и решения

Появляется сообщение об ошибке "Обновление не применимо"

Сообщение об ошибке

Обновление не применимо к вашему компьютеру.

Причина 1. Обновление заменено

Чтобы устранить эту проблему, проверка, что устанавливаемые пакеты содержат более новые версии двоичных файлов. Кроме того, проверка, что пакет заменен другим новым пакетом.

Причина 2. Обновление уже установлено
Чтобы устранить эту проблему, убедитесь, что пакет, который вы пытаетесь установить, еще не установлен.

Причина 3. Неправильное обновление архитектуры

Чтобы устранить эту проблему, убедитесь, что пакет, который вы пытаетесь установить, соответствует используемой версии Windows. Сведения о версии Windows можно найти в разделе "Применимо к" статьи для каждого обновления. Например, только Windows Server 2012 обновления не могут быть установлены на компьютерах Windows Server 2012 R2.

Убедитесь, что пакет, который требуется установить, соответствует архитектуре процессора используемой версии Windows. Например, обновление на основе x86 не может быть установлено на 64-разрядных системах Windows.

Причина 4. Отсутствуют необходимые обновления

Чтобы устранить эту проблему, прочитайте 
связанную с пакетом статью, чтобы узнать, установлены ли необходимые обновления. Например, если сообщение об ошибке появляется в Windows 8.1 или Windows Server 2012 R2, может потребоваться установить 2919355 обновления за апрель 2014 г. в качестве необходимых компонентов и одного или нескольких необходимых обновлений обслуживания (базы знаний 2919442 и 3173424 базы знаний).

Чтобы определить, установлены ли эти необходимые обновления, выполните следующую команду PowerShell:
get-hotfix KB3173424, KB2919355, KB2919442

Если обновления установлены, команда возвращает дату установки в разделе InstalledOn выходных данных.

Обновления не скачивание из Windows Server Update Services (WSUS) или Configuration Manager

Сообщение об ошибке:

Не удалось подключиться к Mux из-за ошибок сети или сертификата

Чтобы устранить эту проблему, проверка числовой код, указанный в коде сообщения об ошибке: он соответствует коду ошибки winsock. Ошибки сертификата являются детализированными (например, сертификат не может быть проверен, сертификат не авторизован и т. д.).

